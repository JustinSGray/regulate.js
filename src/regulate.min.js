var jQuery=jQuery||{};(function(a,b){"use strict";var c,d,e,f,g,h;c=this,d={format:function(a){var b,c,d=a;for(c=Array.prototype.splice.call(arguments,1),b=0;c.length>b;b+=1)d=d.replace("{"+b+"}",c[b]);return d}},e={max_length:function(a,b){return b.max_length?a.length<=b.max_length:!1},min_length:function(a,b){return b.min_length?a.length>=b.min_length:!1},exact_length:function(a,b){return b.exact_length?a.length===b.exact_length:!1},email:function(a){var b=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;return b.test(a)},match_field:function(b,c,d){var e,f=!1;return c.match_field&&(e=c.match_field,a.each(d,function(a){a.name===e&&(f=a.value===b)})),f},min_count:function(b,c,d){if(!c[b])return!1;var e=a.filter(d,function(a){return a.name===c.name});return e.length>=c[b]},max_count:function(b,c,d){if(!c[b])return!1;var e=a.filter(d,function(a){return a.name===c.name});return e.length<=c[b]},exact_count:function(b,c,d){if(!c[b])return!1;var e=a.filter(d,function(a){return a.name===c.name});return e.length===c[b]},min_checked:function(a,b,c){return this.min_count("min_checked",b,c)},exact_checked:function(a,b,c){return this.exact_count("exact_checked",b,c)},max_checked:function(a,b,c){return this.max_count("max_checked",b,c)},min_selected:function(a,b,c){return this.min_count("min_selected",b,c)},exact_selected:function(a,b,c){return this.exact_count("exact_selected",b,c)},max_selected:function(a,b,c){return this.max_count("max_selected",b,c)}},f={required:function(a){var c,e,f;return c="{0} {1} required.",e=a.charAt(a.length-1),f="s"===e?"are":"is",d.format(c,a,f)},email:function(a){var c="{0} must be a valid email.";return d.format(c,a)},match_field:function(a,b,c){var e,f,g,h="{0} must match {1}.";return g=b.match_field,e=c[g].display_as||g,f=b.display_as||b.name,d.format(h,f,e)},max_length:function(a,b){var c="{0} must have a maximum length of {1}.";return d.format(c,a,b.max_length)},min_length:function(a,b){var c="{0} must have a minimum length of {1}.";return d.format(c,a,b.min_length)},exact_length:function(a,b){var c="{0} must have an exact length of {1}.";return d.format(c,a,b.exact_length)},min_checked:function(a,b){var c=b.min_checked,e="Check atleast {0} checkbox";return e+=1!==c?"es":".",d.format(e,c)},max_checked:function(a,b){var c=b.max_checked,e="Check a maximum of {0} checkbox";return e+=1!==c?"es":".",d.format(e,c)},exact_checked:function(a,b){var c=b.exact_checked,e="Check exactly {0} checkboxes";return e+=1!==c?"es":".",d.format(e,c)},min_selected:function(a,b){var c=b.min_selected,e="Select atleast {0} option";return e+=1!==c?"s":".",d.format(e,c)},max_selected:function(a,b){var c=b.max_selected,e="Select a maximum of {0} option";return e+=1!==c?"s":".",d.format(e,c)},exact_selected:function(a,b){var c=b.exact_selected,e="Select exactly {0} option";return e+=1!==c?"s":".",d.format(e,c)}},g=function(a,b){this.name=a,this.cbs=[],this.errorElems={},this.isBrowser=!1,this.reqs=this.transformReqs(b)},g.prototype.displayErrors=function(c){var d=this;a.each(c,function(a,c){var e,g,h;if(h=d.errorElems[c]||""){for(h=b(h),g=b("<ul></ul>"),e=0;a.length>e;e+=1)b("<li>"+a[e]+"</li>").appendTo(g);g.appendTo(h)}})},g.prototype.notifySubmission=function(b,c){a.each(this.cbs,function(a){a(b,c)})},g.prototype.validate=function(b,c){var d=this,g={},h={};if(!b)throw Error("Field values must be supplied in order to validate.");c&&d.cbs.push(c),a.each(b,function(a){var b=a.name,c=a.value;h[b]=h[b]||[],c&&h[b].push(c)}),a.each(d.reqs,function(c,i){var j,k,l,m=[];h[i]||(h[i]=[]),j=h[i],a.isEmpty(j)?(l=c.display_as||i,k=f.required(l,c,d.reqs),m.push(k)):a.each(c,function(g,h){"name"!==h&&e.hasOwnProperty(h)&&a.each(j,function(g){var j=e[h](g,c,b);j||(f[h]?(l=c.display_as||i,k=f[h](l,c,d.reqs)):k=h,-1===a.indexOf(m,k)&&m.push(k))})}),m.length>0&&(g[i]=m)}),console.log("These were the transformed field vals",h),a.isEmpty(g)?d.notifySubmission(null,b):(d.isBrowser&&d.displayErrors(g),d.notifySubmission(g,null))},g.prototype.transformReqs=function(b){var c=this,d={};return a.each(b,function(a){var b,e={},f=a.name;for(b in a)a.hasOwnProperty(b)&&("display_error"===b?c.errorElems[f]=a[b]:e[b]=a[b]);a.name&&(d[a.name]=e)}),d},g.prototype.addCb=function(a){var b=this;b.cbs.push(a)},g.prototype.onSubmit=function(d){var e=this;e.addCb(d),e.isBrowser=!0,b(c.document).on("submit","#"+e.name,function(c){c.preventDefault(),a.each(e.errorElems,function(a){b(a).html("")});var d=b(this).serializeArray();e.validate(d)})},h=function(a,b){h[a]=new g(a,b)},h.Rules=e,h.Messages=f,h.registerRule=function(a,b){if(h.Rules[a])throw Error(a+" is already defined as a rule.");h.Rules[a]=b},c.Regulate=h}).call(this,_,jQuery);